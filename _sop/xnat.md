---
title: XNAT
order: 
image:
shorthand: xnat
---

Before you start make yourself a cup of tea or get a snack, put on some soothing music or a podcast in the background. XNAT is slow and you will need to be patient with it else you will keep cancelling your own commands. Pop-ups can be slow and the amount of data moved takes much time. I recommend you start this at the end of the day instead of at the beginning and leave it to go over night to account for higher bandwidth demands on PACS during office hours.

1.	Log into the GSTT network and open a browser.
2.	Go to https://sp-pr-flipml01.gstt.local and log in with your username. If you do not have a username, contact Dika to make one for you.
3.	If the project doesn’t exist yet, please contact Dika to create it. If you have any specific anonymisation requirements, please let her know about them.
4.	To open your project page, click on Browse - My Projects - and select the project git sdasssyou're working with. This will open your project page. On the right-hand side, choose ‘Import From PACS’. Please only use this option if you have a small number of scans to upload (<100). If you have a large cohort, it's recommended to use the Rest API to perform the upload. Speak to Dika about this.
5.	If your dataset is reasonably small, use the DQR. Clicking on 'Import from PACS' will open the data query-retrieve (DQR) page which allows you to query Sectra PACS for the requested images. 
    <ul><li>You can use the DQR in two ways: by entering the search criteria or by importing a CSV file</li>
        <ol><li>Search criteria: you can use accession number or patient ID and date range and you can use * for wildcard. Click on ‘Search PACS’. Wait for the results to show. Once you find the correct scan(s), tick the box on the left-hand side. Then press the ‘Begin Import’ button at the bottom of the screen. A pop-up will appear to select all series which are relevant. Select all which are relevant (if you’re importing CTs, de-select the Dose Info, Dose Report and the Patient Protocol series, as they contain burnt-in patient data!). Click ‘Import’. </li>
            <li>CSV: you can upload a correctly-formatted CSV to perform a bulk search. This is described <a href=" https://wiki.xnat.org/xnat-tools/dicom-query-retrieve-plugin/using-dqr-bulk-querying-and-importing-via-CSV-file">here</a>. The CSV file should contain either your Accession Numbers (which uniquely identify a scan) or a Patient ID and a study date. If you're using the latter method, pay special attention to the formatting of the dates which should be YYYYMMDD to match the date formatting in PACS. To do the search click on ‘import CSV’ at the top of the page. Choose your CSV file. Click on ‘upload’. The query will begin – it may take a while. If an error occurs, test your CSV file by reducing it to only one query and see if that comes up with what you expect. Once you can query all you want at once without issue, you’ll have to select which scans to import. NB: XNAT can only handle about 20-30 import queries at once, else it will get stuck on retrieving series information screen. If you’re importing CTs, de-select the Dose Info, Dose Report and the Patient Protocol series, as those contain burnt-in images of dates and names. Click on ‘Import Selected’. Wait until you get a notification that the query had been sent to PACS. Then click on ‘Close’. You will need to upload the CSV again to select the next batch for import.</li>
        </ol></ul>
6.	The imported data will appear in the pre-archive (Upload -> Go to prearchive). Click ‘Refresh’ if your data isn’t there, or check the Import Queue (Upload ->  Import Queue/History) – the data takes a while to transfer.
7.	In the pre-archive, you can review the details of your import, such as files and DICOM tags. Once you’ve confirmed you’re happy with the data, select it in the pre-archive (tick the left-hand side checkbox) and select ‘Change projects’ on the right-hand side. Select your project. This will assign the data to your project. You can then ‘Archive’ it, which will move the data from the pre-archive into your project folder.
8.	You can now view, amend and interact with the data in the project (Browse -> My Projects -> your folder). You can check the DICOM tags of each data session (click on the Subject then hover over the scan details until 3 icons appear – the first is View Details, select this to view tags), you can view the session (click on ‘View Session’ on the right-hand side). You can also delete or download the images here or in the project details. 
